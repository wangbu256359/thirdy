{"version":3,"file":"jsonpath.js","names":["jsonpathRegex","jsonpath","path","json","steps","match","exec","step","groups","index","push","length","undefined","lastStep","pop","curr","Object","prototype","hasOwnProperty","call"],"sources":["../../../lib/util/jsonpath.ts"],"sourcesContent":["const jsonpathRegex = /\\$?(?<step>\\w+)|(?:\\[(?<index>\\d+)\\])/g;\n\n/* eslint complexity:[0,8] */\nexport function jsonpath({ path, json }) {\n  const steps: string[] = [];\n  let match: RegExpExecArray | null;\n  while ((match = jsonpathRegex.exec(path)) !== null) {\n    const step = match?.groups?.step ?? match?.groups?.index;\n    if (step) {\n      steps.push(step);\n    }\n  }\n\n  if (steps.length < 1) {\n    return undefined;\n  }\n\n  // array length check above guarantees .pop() will return a value\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const lastStep = steps.pop()!;\n  let curr = json;\n  for (const step of steps) {\n    if (Object.prototype.hasOwnProperty.call(curr, step)) {\n      if (typeof curr[step] !== 'object') {\n        return undefined;\n      }\n\n      curr = curr[step];\n    }\n  }\n\n  return curr[lastStep];\n}\n"],"mappings":";;;AAAA,MAAMA,aAAa,GAAG,wCAAwC;;AAE9D;AACO,SAASC,QAAQ,CAAC;EAAEC,IAAI;EAAEC;AAAK,CAAC,EAAE;EACvC,MAAMC,KAAe,GAAG,EAAE;EAC1B,IAAIC,KAA6B;EACjC,OAAO,CAACA,KAAK,GAAGL,aAAa,CAACM,IAAI,CAACJ,IAAI,CAAC,MAAM,IAAI,EAAE;IAClD,MAAMK,IAAI,GAAGF,KAAK,EAAEG,MAAM,EAAED,IAAI,IAAIF,KAAK,EAAEG,MAAM,EAAEC,KAAK;IACxD,IAAIF,IAAI,EAAE;MACRH,KAAK,CAACM,IAAI,CAACH,IAAI,CAAC;IAClB;EACF;EAEA,IAAIH,KAAK,CAACO,MAAM,GAAG,CAAC,EAAE;IACpB,OAAOC,SAAS;EAClB;;EAEA;EACA;EACA,MAAMC,QAAQ,GAAGT,KAAK,CAACU,GAAG,EAAG;EAC7B,IAAIC,IAAI,GAAGZ,IAAI;EACf,KAAK,MAAMI,IAAI,IAAIH,KAAK,EAAE;IACxB,IAAIY,MAAM,CAACC,SAAS,CAACC,cAAc,CAACC,IAAI,CAACJ,IAAI,EAAER,IAAI,CAAC,EAAE;MACpD,IAAI,OAAOQ,IAAI,CAACR,IAAI,CAAC,KAAK,QAAQ,EAAE;QAClC,OAAOK,SAAS;MAClB;MAEAG,IAAI,GAAGA,IAAI,CAACR,IAAI,CAAC;IACnB;EACF;EAEA,OAAOQ,IAAI,CAACF,QAAQ,CAAC;AACvB"}